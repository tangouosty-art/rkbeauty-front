<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="noindex, nofollow" />
  <title>RKbeauty ‚Äî Admin</title>
  <link rel="stylesheet" href="css/style.css" />

  <style>
    .admin-wrap { max-width: 980px; margin: 100px auto; padding: 0 20px; }
    .admin-card { background: var(--white); border: 1px solid #e0e0e0; padding: 28px; }
    .admin-title { font-size: 2rem; letter-spacing: 2px; margin-bottom: 6px; }
    .admin-sub { color: var(--text-light); margin-bottom: 20px; }

    .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 14px; }
    @media (max-width: 760px){ .grid{ grid-template-columns: 1fr; } }

    label { display:block; margin-bottom: 6px; font-weight: 600; }
    .form-control {
      width: 100%;
      padding: 1rem 1.2rem;
      border: 2px solid #e0e0e0;
      background: var(--cream);
      font-size: 1rem;
      font-family: 'Open Sans', sans-serif;
    }
    .form-control:focus { outline:none; border-color: var(--primary-gold); background:#fff; }

    .row { display:flex; gap: 12px; flex-wrap: wrap; align-items:center; margin-top: 16px; }

    .btn-admin {
      padding: 1rem 1.6rem;
      background: var(--black);
      color: var(--white);
      border: 2px solid var(--primary-gold);
      cursor: pointer;
      text-transform: uppercase;
      letter-spacing: 2px;
      font-weight: 600;
    }
    .btn-admin:hover { background: var(--primary-gold); color: var(--black); }

    .btn-ghost{
      padding: 1rem 1.6rem;
      background: transparent;
      color: var(--dark);
      border: 2px solid #d9d9d9;
      cursor: pointer;
      text-transform: uppercase;
      letter-spacing: 2px;
      font-weight: 600;
    }
    .btn-ghost:hover { border-color: var(--primary-gold); }

    .panel { margin-top: 18px; padding: 16px; background: var(--cream); border-left: 4px solid var(--primary-gold); }
    .panel h3 { margin-bottom: 10px; font-size: 1.2rem; }

    .slot-grid { display:grid; grid-template-columns: 1fr 1fr; gap: 14px; }
    @media (max-width: 760px){ .slot-grid{ grid-template-columns: 1fr; } }

    .slot-card { background:#fff; border: 1px solid #e0e0e0; padding: 14px; }
    .slot-row { display:flex; justify-content: space-between; align-items:center; gap: 12px; flex-wrap: wrap; }

    .badge { display:none; padding: 8px 12px; border: 1px solid rgba(201,169,97,.55); }
    .ok { display:inline-block; color:#1b5e20; border-color:#1b5e20; }
    .err { display:inline-block; color:#b00020; border-color:#b00020; }

    /* Table */
    .table { width:100%; border-collapse: collapse; margin-top: 10px; }
    .table th { background: #faf7f0; border-bottom: 2px solid #e0e0e0; padding: 10px; text-align:left; }
    .table td { border-bottom: 1px solid #eee; padding: 10px; vertical-align: top; }
    .table input, .table select { width:100%; padding: 10px; }
  </style>
</head>

<body>
  <main class="admin-wrap">
    <div class="admin-card">
      <h1 class="admin-title">Admin ‚Äî Planning</h1>
      <p class="admin-sub">G√©rer les quotas et blocages par type (Service / Formation).</p>

      <!-- HEADER INPUTS -->
      <div class="grid">
        <div>
          <label for="adminToken">Token admin</label>
          <input id="adminToken" class="form-control" type="password" placeholder="x-admin-token" />
        </div>

        <div>
          <label for="type">Type</label>
          <select id="type" class="form-control">
            <option value="service">Service</option>
            <option value="formation">Formation</option>
          </select>
        </div>

        <div>
          <label for="date">Date</label>
          <input id="date" class="form-control" type="date" />
        </div>
      </div>

      <!-- PLANNING PANEL -->
      <div class="panel">
        <h3>Cr√©neaux</h3>

        <div class="slot-grid">
          <div class="slot-card">
            <div class="slot-row">
              <strong>Matin</strong>
              <label style="display:flex; gap:8px; align-items:center; font-weight:600;">
                <input id="morningOpen" type="checkbox" />
                Ouvert
              </label>
            </div>
            <div style="margin-top:10px;">
              <label for="morningQuota">Quota matin</label>
              <input id="morningQuota" class="form-control" type="number" min="0" step="1" value="6" />
            </div>
          </div>

          <div class="slot-card">
            <div class="slot-row">
              <strong>Apr√®s-midi</strong>
              <label style="display:flex; gap:8px; align-items:center; font-weight:600;">
                <input id="afternoonOpen" type="checkbox" />
                Ouvert
              </label>
            </div>
            <div style="margin-top:10px;">
              <label for="afternoonQuota">Quota apr√®s-midi</label>
              <input id="afternoonQuota" class="form-control" type="number" min="0" step="1" value="6" />
            </div>
          </div>
        </div>

        <div class="row">
          <button class="btn-admin" id="loadBtn" type="button">Charger</button>
          <button class="btn-admin" id="saveBtn" type="button">Enregistrer</button>
          <button class="btn-ghost" id="blockDayBtn" type="button">Bloquer la journ√©e</button>
          <button class="btn-ghost" id="resetBtn" type="button">R√©initialiser</button>
          <span id="status" class="badge"></span>
        </div>
      </div>

      <hr style="margin:24px 0;">

      <!-- SESSIONS FORMATIONS -->
      <section class="admin-card" style="padding: 20px;">
        <h2 class="admin-title" style="font-size:1.4rem; margin-bottom:6px;">üìÖ Sessions Formations</h2>
        <p class="admin-sub">Associer des dates √† chaque formation + g√©rer les places.</p>

        <div class="row" style="gap:12px;">
          <div style="min-width:220px;">
            <label>Formation</label>
            <select id="fsFormationCode" class="form-control">
              <option value="">-- Choisir --</option>
              <option value="F2J-150">F2J-150 (2 jours - 150‚Ç¨)</option>
              <option value="F2J-100">F2J-100 (2 jours - 100‚Ç¨)</option>
              <option value="F4J-200">F4J-200 (4 jours - 200‚Ç¨)</option>
              <option value="F4J-250">F4J-250 (4 jours - 250‚Ç¨)</option>
              <option value="F7J-300">F7J-300 (7 jours - 300‚Ç¨)</option>
              <option value="F7J-350">F7J-350 (7 jours - 350‚Ç¨)</option>
              <option value="F2S-600">F2S-600 (14 jours - 600‚Ç¨)</option>
              <option value="F2S-650">F2S-650 (14 jours - 650‚Ç¨)</option>
              <option value="F4S-1300">F4S-1300 (28 jours - 1300‚Ç¨)</option>
              <option value="P7J-250">P7J-250 (Promo 7 jours - 250‚Ç¨)</option>
              <option value="P2S-350">P2S-350 (Promo 14 jours - 350‚Ç¨)</option>
              <option value="I7J-650">I7J-650 (Intensif 7 jours - 650‚Ç¨)</option>
              <option value="I14J-900">I14J-900 (Intensif 14 jours - 900‚Ç¨)</option>

            </select>
          </div>

          <div style="min-width:220px;">
            <label>Libell√©</label>
            <input id="fsLabel" class="form-control" type="text" placeholder="ex: Formation 2 jours" />
          </div>

          <div style="min-width:140px;">
            <label>Prix (‚Ç¨)</label>
            <input id="fsPrice" class="form-control" type="number" min="0" step="1" />
          </div>

          <div style="min-width:140px;">
            <label>Dur√©e (jours)</label>
            <input id="fsDays" class="form-control" type="number" min="1" max="60" />
          </div>

          <div style="min-width:190px;">
            <label>Date d√©but</label>
            <input id="fsStartDate" class="form-control" type="date" />
          </div>

          <div style="min-width:160px;">
            <label>Places</label>
            <input id="fsCapacity" class="form-control" type="number" min="1" step="1" value="1" />
          </div>

          <div style="min-width:180px;">
            <label>Cr√©neau</label>
            <select id="fsSlotPolicy" class="form-control">
              <option value="both">Matin ou Apr√®s-midi</option>
              <option value="morning">Matin seulement</option>
              <option value="afternoon">Apr√®s-midi seulement</option>
            </select>
          </div>

          <div style="min-width:180px;">
            <label>Statut</label>
            <select id="fsStatus" class="form-control">
              <option value="draft">Brouillon</option>
              <option value="published">Publi√©</option>
              <option value="closed">Ferm√©</option>
            </select>
          </div>

          <div style="min-width:260px; flex:1;">
            <label>Note</label>
            <input id="fsNote" class="form-control" type="text" placeholder="Optionnel" />
          </div>
        </div>

        <div class="row">
          <button id="fsCreateBtn" class="btn-admin" type="button">‚ûï Cr√©er la session</button>
          <button id="fsReloadBtn" class="btn-ghost" type="button">üîÑ Recharger la liste</button>
          <span id="fsStatusMsg" class="badge"></span>
        </div>

        <div style="margin-top:16px; overflow:auto;">
          <table class="table">
            <thead>
              <tr>
                <th>ID</th>
                <th>Code</th>
                <th>D√©but</th>
                <th>Jours</th>
                <th>Places</th>
                <th>Reserved</th>
                <th>Holds</th>
                <th>Remaining</th>
                <th>Statut</th>
                <th>Note</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="fsTableBody"></tbody>
          </table>
        </div>
      </section>
    </div>
  </main>

  <!-- JS -->
  <script type="module" src="js/admin-planning.js"></script>
  <script type="module" src="js/admin-sessions.js"></script>
</body>
</html>
